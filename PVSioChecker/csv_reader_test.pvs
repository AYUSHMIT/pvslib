% Usage Example of csv_reader

csv_reader_test : THEORY
BEGIN

  IMPORTING csv_reader,
            csv_writer,
	    csv_writerow

  Spec: list[CSVFieldSpec] = (: Integer, String, Rational, BooleanOrNull :)

  ex1: list[CSVDataFromSpec(Spec)] =
    LET file = "csv_reader_test.csv"
    IN readCSV(file,MSEXCEL_DIALECT,Spec)

  main : void =
    LET wr = csv_writer("ojo",MSEXCEL_DIALECT) IN
      write_row(wr,nth(ex1,1))

%    IN while(NOT eof?(fin),
%       	     LET data: CSVDataFromSpec(spec) = readCSVRecord(fin,MSEXCEL_DIALECT,spec)
%	     IN printf("~a ~a ~a ~a~%",{|(toRational(car(data)),
%	                                  toString(nth(data,1)),
%					  toRational(nth(data,2)),
%					  toBoolean(nth(data,3)))|})
 %        ) & fclose(fin);

END csv_reader_test
